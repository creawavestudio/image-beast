function handleErrors(a,b){return a.ok||b?a:fetch('/images/placeholder.jpg')}function optimize(a){this.addEventListener('fetch',b=>{var c=!a.hasOwnProperty('useWebp')||a.useWebp,d=!a.hasOwnProperty('useXr')||a.useXr,e=!a.hasOwnProperty('useSaveData')||a.useSaveData,f=!a.hasOwnProperty('useCache')||a.useCache,g,h=b.request.headers,i=b.request.url,j=location.hostname+(location.port?':'+location.port:'')+'$$cache';/\.jpg$|.gif$|.png$/.test(i)&&!i.includes('placeholder')&&(h.get('save-data')&&e?g=i.substr(0,i.lastIndexOf('.'))+'-savedata'+i.substr(i.lastIndexOf('.'),i.length-1):h.has('accept')&&(h.get('accept').includes('webp')&&c&&(g=i.substr(0,i.lastIndexOf('.'))+'.webp'),h.get('accept').includes('ms-photo')&&d&&(g=i.substr(0,i.lastIndexOf('.'))+'.jxr')),g==void 0&&(g=i),b.respondWith(caches.match(g).then(function(k){return k||fetch(g).then(handleErrors,i.includes('placeholder')).then(function(l){return f?caches.open(j).then(function(m){return m.put(g,l.clone()),l}):l})})))})}
