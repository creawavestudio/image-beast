<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Image Beast</title>
    <style>
    p{
      font-size: 20px;
    }
    ul{
      font-size: 20px;
    }
    img.displayed {
        display: block;
        margin-left: auto;
        margin-right: auto
      }
    .github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}
    </style>
  </head>
  <body>
    <a href="https://github.com/deanhume/image-beast" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>
    <img class="displayed" src="./images/beast.jpg" width="250" height="323" alt="The image beast" />
    <h1>The Image Beast</h1>
    <p>
      From the murky depths of the sea, comes the image beast! It's here to tame your every image need with a handy <a href="https://github.com/deanhume/image-beast/blob/master/imagebeast.min.js">1 KB script</a>.
      There are so many great different image formats available these days, and many of them offer significant file size savings over the traditional formats (JPEG, GIF, PNG).
      Unfortunately not every browser provides support for all of these great image formats. We want to pass on these savings to
      all of our users.
      <br>
      <br>
      This is where the image beast comes in! Simply include this tiny <a href="https://github.com/deanhume/image-beast/blob/master/imagebeast.min.js">1KB script</a> in your Service Worker, create the appropriate image formats, and
      it will handle the rest for you.
      <br>
      Serve the lightest, leanest images to your users and help them get the fastest page load times possible. Grrrrrr!
      <br>
      <br>
      The image beast does all of these things:
      <ul>
        <li>Serves WebP images to Google's Chrome Browser</li>
        <li>Serves JpegXR images to Microsoft's Edge Browser</li>
        <li>Serves lean image for Android users with the Data Saver feature enabled</li>
        <li>Caches the images!</li>
      </ul>
  </p>
  <h1>Progressive Enhancement</h1>
  <p>
    What about older browsers I hear you say? Well, the beast has them tamed too! Service Workers are the ultimate progressive
    enhancement and if your browser doesn't support them they will simply return the images as normal. If your browser does support
    Service Workers, then the image beast simply uses it slippery tentacles to decide the perfect image format to return.
    <br>
    <br>
    <a href="https://developers.google.com/speed/webp/">WebP</a>? <a href="https://msdn.microsoft.com/en-gb/library/windows/desktop/hh707223(v=vs.85).aspx">JPEGXR</a>?
    Or even a low resolution version of an image? The image beast is in control.
  </p>

  <h1>Show me an example!</h1>
  <p>
    First up, you need to check if Service Workers are supported in your browser. If they are, create and register the Service Worker
    by adding the following code to your page.
  </p>
    <script src="https://gist.github.com/deanhume/bede2890e6e27f5c01a4cfac4498e4fa.js"></script>
  <p>
    Next, simply import the script into your Service Worker (service-worker.js) and begin optimizing.
  </p>
    <script src="https://gist.github.com/deanhume/f9d63b75e33ada5d3ca1694579354cc2.js"></script>
  <p>
    As you can see from the code above, you can also configure image beast. For example, if you'd prefer not to return WebP images, then
    simply disable it in the config.
  <p>
    If you'd like to see this in action, look no further than the page you are currently reading - it is using the image beast script!
    Open up your Developer Tools and see the beast in action.
  </p>

  <h1>How does it work under the hood?</h1>
  <p>
    The image beast works by listening to the client hints that your browser sends through when it makes an HTTP request. Let's say you are using Google Chrome as your browser.
    By default, the browser will send through an Accept Request header and in the
    case of Chrome, it will send through a client hint of "image/webp" notifying the server that it supports WebP images. Using a Service Worker,
    we can tap into this request and return an alternate version of the image.
    <br>
    <br>
    Hey, but I don't use Google Chrome! Don't worry - the image beast has you covered. Microsoft's Edge currently has Service Workers under
    development and the image beast will return JPEGXR images for you if it detects that it can support it. The image beast is prowling and
    ready to pounce on every image format.
  </p>
  <h1>Performance is key!</h1>
  <p>
    Using the image beast, you are able to return the leanest possible images to your user's browser. Using the power of Service Workers,
    We can take this a step further and cache the image request once it has been made.
    This means that the user won't even have to make another HTTP request for the image and it will load instantly. It is built-in by default, but you can turn it off using the configuration options.
    <br>
    <br>
    The image beast also has another sneaky trick up it's tentacle. Users that use Android devices and have the <a href="https://support.google.com/chrome/answer/2392284?hl=en-GB">Data Saver feature</a> enabled for their phone or tablet
    will have low resolution images returned to them. All you need to do is save a low resolution version of the image with "-savedata" appended to the file name (eg. beast-savedata.jpg) and
    the image beast will do the rest. In fact, even if you haven't provided a low resolution version of the image, it will simply return a tiny placeholder image in order
    to save your users data.
  </p>

  <h1>The Future</h1>
  <p>
    The best part about the image beast is that it can be easily extended to support newer image formats in the future. For example, <a href="http://flif.info/">FLIF</a>
    is a new image format that has great savings and could possibly make it to our browsers one day. The future is bright for the beast!
  </p>
  </body>
  <script>
     // Register the service worker
     if ('serviceWorker' in navigator) {
       navigator.serviceWorker.register('./service-worker.js').then(function(registration) {
         // Registration was successful
         console.log('ServiceWorker registration successful with scope: ', registration.scope);
     }).catch(function(err) {
         // registration failed :(
           console.log('ServiceWorker registration failed: ', err);
         });
     }
 </script>
</html>
